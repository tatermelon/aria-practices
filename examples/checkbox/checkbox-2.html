  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Tri-State Checkbox With Grouping Label Examples | WAI-ARIA Authoring Practices 1.1</title>
    <link href="../css/core.css" rel="stylesheet">
    <link href="../css/table.css" rel="stylesheet">
    <script src="../js/examples.js" type="text/javascript"></script>
    <link href="css/checkbox-3.css" rel="stylesheet">
    <script src="js/checkbox-3.js" type="text/javascript"></script>
  </head>
  <body>
    <main>
      <h1>Tri-State Checkbox With Grouping Label Examples</h1>
    <p>
    Following are three example implementations of the <a href="../../#checkbox">design pattern for checkbox</a> that demonstrate how to make a widget that uses the <code>mixed</code> value for <code>aria-checked</code>.
    These examples also show three different ways of labeling a collection of checkboxes so screen reader users can perceive that all members of the collection are part of a logical group.
    </p>
    <p>
    In the below examples, a set of checkboxes is used to choose condiments for a sandwich.
    The user can use the first checkbox, labeled "All Condiments", to quickly specify a desire for either all or none of the condiments.
    If the user chooses to have some but not all condiments, the "All Condiments" checkbox will reflect that state as "partially checked"; this is the <code>mixed</code> value of <code>aria-checked</code>.
     </p>
      <h2>Examples</h2>
      <div  class="group" id="example">
      <p>Note that the conditions and actions that cause screen readers to announce the grouping labels in the following 3 examples vary from one screen reader to another; such assistive technology behaviors are not standardized. </p>
      <h3 id="ex1_label">Example 1: group label using <code>fieldset</code> and <code>legend</code></h3>
      <p>This is the preferred implementation whenever feasible.</p>
      <div role="region" aria-labelledby="ex1_label">
      <div id="ex1">
       <fieldset>
          <legend>Sandwich Condiments</legend>
              <div
                  role="checkbox"
                  class="group_checkbox"
                  aria-checked="false"
                  tabindex="0"
                  onclick="toggleGroupCheckbox(event)"
                  onkeydown="toggleGroupCheckbox(event)"
                  onfocus="focusCheckbox(event)"
                  onblur="blurCheckbox(event)"
              >
                <img src="./images/checkbox-unchecked-black.png" alt="">
                All condiments
            </div>
            <label><input type="checkbox" id="desc1">Lettuce</label>
            <label><input type="checkbox" id="desc2">Tomato</label>
            <label><input type="checkbox" id="desc3">Mustard</label>
            <label><input type="checkbox" id="desc4">Sprouts</label>
      </fieldset>
      </div>
      </div>
      <p>In this implementation:</p>
     <ul>
              <li>The grouping label, "sandwich condiments", is defined by putting the group label in a <code>legend</code> element within a <code>fieldset</code> element that wraps the set of checkboxes.</li>
              <li>The tri-state checkbox is labeled by content, e.g., it comes from the child text nodes of the element with <code>role=checkbox</code>.</li>
              <li>The individual condiment checkboxes are labeled by wrapping the input and the labeling text in a <code>label</code> element.</li>
          </ul>

        <h3 id="ex2_label">Example 2: Group Label Using <code>role = group</code></h3>
        <div role="region" aria-labelledby="ex2_label">
            <div id="ex2">
                <div role="group" aria-label="sandwitch condiment">
                    <div>Sandwich Condiments</div>
                    <div role="checkbox" class="group_checkbox" aria-checked="false" tabindex="0"
                        onclick="toggleGroupCheckbox(event)"
                        onkeydown="toggleGroupCheckbox(event)"
                        onfocus="focusCheckbox(event)"
                        onblur="blurCheckbox(event)">
                        <img src="./images/checkbox-unchecked-black.png" alt="">
                        All condiments
                    </div>
                    <label><input type="checkbox" id="ex-2-desc1">Lettuce</label>
                        <label><input type="checkbox" id="ex-2-desc2">Tomato</label>
                        <label><input type="checkbox" id="ex-2-desc3">Mustard</label>
                        <label><input type="checkbox" id="ex-2-desc4">Sprouts</label>
                </div>
            </div>
        </div>
        <p>In this implementation:</p>
        <ul>
            <li>The grouping label, “sandwich condiments”, is set by applying <code>aria-label</code>
                to a div with role <code>group</code>.
            </li>
            <li>The tri-state checkbox is labeled by content, e.g., it comes from the child
                text nodes of the element with <code>role=checkbox</code>.
            </li>
            <li>The individual condiment checkboxes are labeled by wrapping the input and the
                labeling text in a <code>label</code> element.
            </li>
        </ul>

        <h3 id="ex3_label">Example 3: Group Label Appended to Individual Checkbox Labels</h3>
        <div role="region" aria-labelledby="ex3_label">
            <div id="ex3">
                <div id="group1">Sandwich Condiments</div>
                <div
                    role="checkbox"
                    class="group_checkbox"
                    aria-checked="false"
                    aria-labelledby="label0 group1"
                    tabindex="0"
                    onclick="toggleGroupCheckbox(event)"
                    onkeydown="toggleGroupCheckbox(event)"
                    onfocus="focusCheckbox(event)"
                    onblur="blurCheckbox(event)">
                    <img src="./images/checkbox-unchecked-black.png" alt="">
                    <span id="label0"> All condiments</span>
                </div>
                <div class="checkbox">
                    <input type="checkbox"
                        aria-labelledby="label1 group1"> <span id="label1">Lettuce</span>
                </div>
                <div class="checkbox">
                    <input type="checkbox"
                        aria-labelledby="label2 group1"> <span id="label2"> Tomato</span>
                </div>
                <div class="checkbox">
                    <input type="checkbox"
                        aria-labelledby="label3 group1"> <span id="label3">Mustard</span>
                </div>
                <div class="checkbox">
                    <input type="checkbox"
                        aria-labelledby="label4 group1"> <span id="label4"> Sprouts</span>
                </div>
            </div>
        </div>
        <p>In this implementation:</p>
        <ul>
            <li>A grouping label is not defined. Instead, "sandwitch condiments" is
                appended to the label for each checkbox by specifying multiple ID values in the <code>aria-labelledby</code> value.</li>
            <li>It is important that the group label is the second ID reference
            so that the condiment label, (e.g., "lettuce", is announced before the "sandwitch condiments"group label.
            </li>
            <li>Because this approach forces screen readers to repeat “sandwich condiments” for every checkbox, which may be distracting for some users,
            this approach is less desirable, especially when grouping a large set of controls.
                </li>
        </ul>
    </div>

      <h2 id="id_a11yfeature">Common Accessibility Features</h2>
             <ul>
                 <li>The examples use the native HTML5 semantics for checkboxes when possible (e.g. the non-mixed state checkboxes) and is the preferred technique for defining checkbox inputs.</li>
                <li><code>div</code> element with role <code>checkbox</code> identifies the <code>div</code> element as a checkbox (e.g. All Condiments checkbox), which supports a mixed state.</li>
                <li><code>div</code> element with role <code>checkbox</code> has <code>onkeydown</code> event to support keyboard activation of the checkbox.</li>
                <li><code>div</code> element with role <code>checkbox</code> has <code>onclick</code> event to support mouse pointer activation of the checkbox.</li>
                <li><code>div</code> element with role <code>checkbox</code>has <code>tabindex="0"</code> to become part of the tab order of the page.</li>
                <li> <code>img</code> element is used to visually indicate the state of checkbox (e.g. checked, mixed, unchecked) to ensure the visual state will be visible when browsers or operating system use “High Contrast” settings by people with visual impairments. (Note: CSS background image techniques or generated content result in visual state disappearing when browsers or operating systems are configured to display high contrast themes.)
               <li><code>toggleGroupCheckbox(event)</code> uses <code>aria-checked</code> attribute to determine which image is displayed to ensure the information communicated to asssitive tecnology is the same as the visual state (e.g. <code>img</code> element).</li>
                <li><code> onfocus</code> and <code> onblur</code> event handlers on both aria checkbox and standard HTML checkboxes support visual focus styling for keyboard only users.</li>
              </ul>

      <h2 id="id_kbd">Keyboard Support</h2>
      <table aria-labelledby="id_kbd">
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Tab</td>
            <td>Moves keyboard focus to checkbox.</td>
          </tr>
          <tr>
            <td>Space</td>
            <td>Toggle the checkbox option either true, false or mixed. False is the default. </td>
          </tr>
        </tbody>
      </table>

      <h2 id="id_rps">ARIA Roles, Properties and States</h2>
      <table aria-labelledby="id_rps">
        <thead>
          <tr>
            <th>Role</th>
            <th>Property/State</th>
            <th>Usage</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>checkbox</td>
            <td></td>
            <td>
              Identify div as Checkbox widget
            </td>
          </tr>
          <tr>
            <td>aria-checked</td>
            <td></td>
            <td>
                Indicate state of checkbox:
                <ul>
                <li>Checked  (e.g. aria-checked=true) </li>
                <li>Unchecked  (e.g. aria-checked=false)</li>
                <li>Mixed (e.g. aria-checked=mixed)</li>
                </ul>
            </td>
          </tr>
          <tr>
            <td>aria-labelledby</td>
            <td></td>
            <td>
            Used to include grouping label in the label of each checkbox
            </td>
          </tr>
        </tbody>
      </table>

<section>
      <h2>Javascript and CSS Source Code</h2>
      <ul>
        <li>CSS: <a href="css/checkbox-3.css" type="tex/css">checkbox-3.css</a></li>
        <li>Javascript: <a href="js/checkbox-3.js" type="text/javascript">checkbox-3.js</a></li>
      </ul>
    </section>

    <section>
      <h2>HTML Source Code</h2>
    <h3 id="sc1_label"> Example 1: group label using <code>fieldset</code> and <code>legend</code> </h3>
    <div id="sc1" role="region" aria-labelledby="sc1 sc1_label" aria-label="HTML source for"></div>

    <h3 id="sc2_label">Example 2: Group Label Using <code>role = group</code></h3>
    <div id="sc2" role="region" aria-labelledby="sc2 sc2_label" aria-label="HTML source for"></div>

    <h3 id="sc3_label">Example 3: Group Label Appended to Individual Checkbox Labels</h3>
    <div id="sc3" role="region" aria-labelledby="sc3 sc3_label" aria-label="HTML source for"></div>

    <script>
          sourceCode.add('sc1', 'ex1')
          sourceCode.add('sc2', 'ex2')
          sourceCode.add('sc3', 'ex3')
          sourceCode.make()
    </script>
    </section>

</main>
<nav>
  <a href="../../#checkbox">Checkbox Design Pattern in WAI-ARIA Authoring Practices 1.1</a>
  </nav>
  </body>
  </html>
